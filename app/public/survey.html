<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Survey</title>
</head>

<body>
    <div class="container my-3">
        <div class="jumbotron">
            <h1>Let's get to know a bit more about you.</h1>
        </div>
        <form action="">
            <h3 class="">Answer the questions below the best you can.</h3>

            <h5 class="mt-4">Question 1:</h5>
            <p>What do you think is your personality?</p>
            <input type="radio" name="q1" value="1"> <span>Friendly and Playful</span> <br>
            <input type="radio" name="q1" value="2"> <span>Strong and Hot-Headed</span> <br>
            <input type="radio" name="q1" value="3"> <span>Shy and Nice</span> <br>
            <input type="radio" name="q1" value="4"> <span>Shy and Quick</span> <br>
            <input type="radio" name="q1" value="5"> <span>Tall and Proud</span>

            <h5 class="mt-4">Question 2:</h5>
            <p>What would be your ideal superpower?</p>
            <input type="radio" name="q2" value="1"> <span>Creating sticky stuff and throwing it to get people
                stuck</span> <br>
            <input type="radio" name="q2" value="2"> <span>Sharp Teeth</span> <br>
            <input type="radio" name="q2" value="3"> <span>Arm Vines</span> <br>
            <input type="radio" name="q2" value="4"> <span>Fiery Hair</span> <br>
            <input type="radio" name="q2" value="5"> <span>Flame Breath</span>

            <h5 class="mt-4">Question 3:</h5>
            <p>If your friends are doing something naughty, what would you do?</p>
            <input type="radio" name="q3" value="1"> <span>Join in</span> <br>
            <input type="radio" name="q3" value="2"> <span>Join in and take over</span> <br>
            <input type="radio" name="q3" value="3"> <span>Join in but try to tell them to stop</span> <br>
            <input type="radio" name="q3" value="4"> <span>Try to tell them to stop</span> <br>
            <input type="radio" name="q3" value="5"> <span>Walk away quietly and quickly</span> <br>

            <h5 class="mt-4">Question 4:</h5>
            <p>What is your opinion on Patrat?</p>
            <input type="radio" name="q4" value="1"> <span>They're so common, I'll avoid every single one!</span> <br>
            <input type="radio" name="q4" value="2"> <span>They're so common, I'll befriend every single one!</span>
            <br>
            <input type="radio" name="q4" value="3"> <span>They're so common, I'll catch every single one!</span> <br>
            <input type="radio" name="q4" value="4"> <span>They're so common, I'll chase away every single one!</span>
            <br>
            <input type="radio" name="q4" value="5"> <span>They're so common, I'll battle every single one!</span>

            <h5 class="mt-4">Question 5:</h5>
            <p>What is your favorite type (out of these)?</p>
            <input type="radio" name="q5" value="1"> <span>Fire</span> <br>
            <input type="radio" name="q5" value="2"> <span>Bug</span> <br>
            <input type="radio" name="q5" value="3"> <span>Water</span> <br>
            <input type="radio" name="q5" value="4"> <span>Grass</span> <br>
            <input type="radio" name="q5" value="5"> <span>Dark</span>

            <h5 class="mt-4">Question 6:</h5>
            <p>What is your favorite move (out of these)?</p>
            <input type="radio" name="q6" value="1"> <span>Bite</span> <br>
            <input type="radio" name="q6" value="2"> <span>Hydro Pump</span> <br>
            <input type="radio" name="q6" value="3"> <span>Inferno</span> <br>
            <input type="radio" name="q6" value="4"> <span>Peck</span> <br>
            <input type="radio" name="q6" value="5"> <span>Vine Whip</span>

            <h5 class="mt-4">Question 7:</h5>
            <p>What is your least favorite move (out of these)?</p>
            <input type="radio" name="q7" value="1"> <span>Earthquake</span> <br>
            <input type="radio" name="q7" value="2"> <span>Flame Charge</span> <br>
            <input type="radio" name="q7" value="3"> <span>Hydro Pump</span> <br>
            <input type="radio" name="q7" value="4"> <span>Ember</span> <br>
            <input type="radio" name="q7" value="5"> <span>Leer</span>

            <h5 class="mt-4">Question 8:</h5>
            <p>What is your least favorite type (out of these)?</p>
            <input type="radio" name="q8" value="1"> <span>Fire</span> <br>
            <input type="radio" name="q8" value="2"> <span>Electric</span> <br>
            <input type="radio" name="q8" value="3"> <span>Water</span> <br>
            <input type="radio" name="q8" value="4"> <span>Bug</span> <br>
            <input type="radio" name="q8" value="5"> <span>Grass</span>

            <h5 class="mt-4">Question 9:</h5>
            <p>Did you like this test?</p>
            <input type="radio" name="q9" value="1"> <span>Yes... I guess...</span> <br>
            <input type="radio" name="q9" value="2"> <span>Umm..... maybe?</span> <br>
            <input type="radio" name="q9" value="3"> <span>No Comment</span> <br>
            <input type="radio" name="q9" value="4"> <span>No</span> <br>
            <input type="radio" name="q9" value="5"> <span>Yes</span>

            <h5 class="mt-4">Question 10:</h5>
            <p>What are your opinions on MEGA EVOLUTION?</p>
            <input type="radio" name="q10" value="1"> <span>Cool....</span> <br>
            <input type="radio" name="q10" value="2"> <span>ITS EPIC</span> <br>
            <input type="radio" name="q10" value="3"> <span>I like to see a change!</span> <br>
            <input type="radio" name="q10" value="4"> <span>It ruins the game....</span> <br>
            <input type="radio" name="q10" value="5"> <span>Wow!</span> <br>

            <button id="submit" class="btn btn-primary float-right m-3">Find my partner!</button>
        </form>
    </div>

    <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog modal-md">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">Here's your partner!</h2>
                </div>
                <div class="modal-body">
                    <h2 id="partner-name" class="text-center"></h2>
                    <img id="partner-img" class="text-center" src="" alt="">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <!-- Optional JavaScript -->
    <script>

        $("#submit").on("click", function (event) {
            event.preventDefault();
            var surveyAnswers = [
                $("input[name='q1']:checked").val(),
                $("input[name='q2']:checked").val(),
                $("input[name='q3']:checked").val(),
                $("input[name='q4']:checked").val(),
                $("input[name='q5']:checked").val(),
                $("input[name='q6']:checked").val(),
                $("input[name='q7']:checked").val(),
                $("input[name='q8']:checked").val(),
                $("input[name='q9']:checked").val(),
                $("input[name='q10']:checked").val()
            ];

            function checkAnswers() {
                let isClear = true;
                for (let index = 0; index < surveyAnswers.length; index++) {
                    const element = surveyAnswers[index];
                    let questionNumber = index + 1;
                    if (element === undefined) {
                        console.log("Answer at question " + questionNumber + " has not been answered.");
                        isClear = false;
                    }
                }
                return isClear;
            }

            if (checkAnswers()) {
                let trainerData = {
                    scores: surveyAnswers
                };

                $.post("/api/friends", trainerData)
                    .then(function (data) {
                    console.log(data);
                    
                    
                    $("#partner-name").text(data.name);
                    $("#partner-img").attr("src", data.photo);

                    $("#results-modal").modal("toggle");
                });
            } else {
                alert("Please make sure all questions have been answered!");
            }
        });

    </script>
</body>

</html>